<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <!--BloonsTD6 property gets automatically set correctly when this file is generated by the Mod Helper on startup-->
        <BloonsTD6>C:\Program Files (x86)\Steam\steamapps\common\BloonsTD6</BloonsTD6>
        <ManagedFolder>$(BloonsTD6)\MelonLoader\Managed</ManagedFolder>
        <OutputFolder>$(BloonsTD6)\Mods</OutputFolder>
    </PropertyGroup>

    <!--References to MelonLoader dependencies-->
    <ItemGroup>
        <Reference Include="$(BloonsTD6)\MelonLoader\MelonLoader.dll"/>
        <Reference Include="$(BloonsTD6)\MelonLoader\0Harmony.dll"/>
    </ItemGroup>

    <!--References to BTD6 dependencies-->
    <ItemGroup>
        <Reference Include="$(ManagedFolder)\Assembly-CSharp.dll"/>
        <Reference Include="$(ManagedFolder)\Il2Cppmscorlib.dll"/>
        <Reference Include="$(ManagedFolder)\Il2CppSystem.Core.dll"/>
        <Reference Include="$(ManagedFolder)\Il2CppSystem.dll"/>
        <Reference Include="$(ManagedFolder)\NinjaKiwi.Common.dll"/>
        <Reference Include="$(ManagedFolder)\NinjaKiwi.LiNK.dll"/>
        <Reference Include="$(ManagedFolder)\UnhollowerBaseLib.dll"/>
        <Reference Include="$(ManagedFolder)\UnhollowerRuntimeLib.dll"/>
        <Reference Include="$(ManagedFolder)\Unity.InputSystem.dll"/>
        <Reference Include="$(ManagedFolder)\Unity.ResourceManager.dll"/>
        <Reference Include="$(ManagedFolder)\Unity.TextMeshPro.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.AnimationModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.AssetBundleModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.AudioModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.CoreModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.Il2CppAssetBundleManager.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.InputLegacyModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.Il2CppImageConversionManager.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.ImageConversionModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.JSONSerializeModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.TextRenderingModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.UI.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.UIElementsModule.dll"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.UIModule.dll"/>
        <Reference Include="$(ManagedFolder)\Newtonsoft.Json.dll"/>
    </ItemGroup>

    <!--Mod Helper dependency-->
    <ItemGroup Condition="$(DontReferenceModHelper) != 'true'">
        <Reference Include="BloonsTD6 Mod Helper" Condition="Exists('$(BloonsTD6)\Mods\BtdModHelper.dll')">
            <HintPath>$(BloonsTD6)\Mods\BtdModHelper.dll</HintPath>
        </Reference>
        <Reference Include="BloonsTD6 Mod Helper" Condition="Exists('$(BloonsTD6)\Mods\_BtdModHelper.dll')">
            <!--Allowing a standardized way to allow compatibility with mods that haven't updated yet-->
            <HintPath>$(BloonsTD6)\Mods\_BtdModHelper.dll</HintPath>
        </Reference>
        <Reference Include="BloonsTD6 Mod Helper" Condition="Exists('$(BloonsTD6)\Mods\BloonsTD6 Mod Helper.dll')">
            <HintPath>$(BloonsTD6)\Mods\BloonsTD6 Mod Helper.dll</HintPath>
        </Reference>
    </ItemGroup>

    <!--Automatically embed pngs, jpgs and bundles-->
    <ItemGroup Condition="'$(AutoEmbed)' != 'false'">
        <EmbeddedResource Include="**/*.png"/>
        <EmbeddedResource Include="**/*.jpg"/>
        <EmbeddedResource Include="**/*.bundle"/>
    </ItemGroup>

    <!--Post build events to copy dll/xml to mods folder-->
    <Target Name="MoveDllToMods" AfterTargets="Build" Condition="Exists('$(TargetDir)$(TargetName).dll')">
        <Message Text="Copying $(ProjectName).dll to Mods Folder..." Importance="High"/>
        <Copy SourceFiles="$(TargetDir)$(TargetName).dll" DestinationFiles="$(OutputFolder)\$(ProjectName).dll"/>
    </Target>
    <Target Name="MoveXmlToMods" AfterTargets="Build" Condition="Exists('$(TargetDir)$(TargetName).xml')">
        <Message Text="Copying $(ResultName).xml to Mods Folder..." Importance="High"/>
        <Copy SourceFiles="$(TargetDir)$(ProjectName).xml" DestinationFiles="$(OutputFolder)\$(ProjectName).xml"/>
    </Target>
</Project>